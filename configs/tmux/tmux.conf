# tmux configuration for catred config
# Matches i3-style keybindings and theme system

# Set prefix to Alt (matching system keybindings)
set -g prefix M-a
unbind C-b
bind-key M-a send-prefix

# Enable mouse support
set -g mouse on

# Set base index to 1 (matching workspace numbering)
set -g base-index 1
setw -g pane-base-index 1

# Increase scrollback buffer
set -g history-limit 10000

# Enable focus events
set -g focus-events on

# Set escape time
set -sg escape-time 0

# Enable vi mode
setw -g mode-keys vi

# Status bar settings
set -g status on
set -g status-interval 1
set -g status-justify centre
set -g status-left-length 60
set -g status-right-length 60

# Window and pane splitting (matching i3-style)
unbind '"'
unbind %
bind M-v split-window -h -c "#{pane_current_path}"
bind M-s split-window -v -c "#{pane_current_path}"

# Pane navigation (matching i3-style)
bind M-h select-pane -L
bind M-j select-pane -D
bind M-k select-pane -U
bind M-l select-pane -R

# Pane resizing (matching i3-style)
bind M-C-h resize-pane -L 5
bind M-C-j resize-pane -D 5
bind M-C-k resize-pane -U 5
bind M-C-l resize-pane -R 5

# Window navigation (matching i3-style)
bind M-n next-window
bind M-p previous-window

# Window management
bind M-q kill-window
bind M-f resize-pane -Z
bind M-space select-layout even-horizontal

# Workspace/Window switching (matching i3-style)
bind M-1 select-window -t :1
bind M-2 select-window -t :2
bind M-3 select-window -t :3
bind M-4 select-window -t :4
bind M-5 select-window -t :5
bind M-6 select-window -t :6
bind M-7 select-window -t :7
bind M-8 select-window -t :8
bind M-9 select-window -t :9

# Move window to workspace (matching i3-style)
bind M-S-1 move-window -t :1
bind M-S-2 move-window -t :2
bind M-S-3 move-window -t :3
bind M-S-4 move-window -t :4
bind M-S-5 move-window -t :5
bind M-S-6 move-window -t :6
bind M-S-7 move-window -t :7
bind M-S-8 move-window -t :8
bind M-S-9 move-window -t :9

# Layout management (matching i3-style)
bind M-t select-layout even-horizontal
bind M-S-t select-layout even-vertical

# Copy mode keybindings (vi-style)
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-selection
bind-key -T copy-mode-vi r send-keys -X rectangle-toggle

# Reload config
bind M-S-c source-file ~/.tmux.conf

# Theme variables (will be set by theme scripts)
set -g @theme_bg "#24273a"
set -g @theme_fg "#cad3f5"
set -g @theme_accent "#eed49f"
set -g @theme_red "#ed8796"
set -g @theme_green "#a6da95"
set -g @theme_yellow "#eed49f"
set -g @theme_blue "#8aadf4"
set -g @theme_purple "#c6a0f6"
set -g @theme_cyan "#8bd5ca"

# Status bar styling
set -g status-style "bg=#{@theme_bg},fg=#{@theme_fg}"
set -g status-left-style "bg=#{@theme_bg},fg=#{@theme_fg}"
set -g status-right-style "bg=#{@theme_bg},fg=#{@theme_fg}"

# Window status formatting
setw -g window-status-format " #I:#W "
setw -g window-status-current-format " #I:#W "
setw -g window-status-current-style "bg=#{@theme_accent},fg=#{@theme_bg}"
setw -g window-status-style "bg=#{@theme_bg},fg=#{@theme_fg}"

# Pane border colors
set -g pane-border-style "bg=#{@theme_bg},fg=#{@theme_fg}"
set -g pane-active-border-style "bg=#{@theme_bg},fg=#{@theme_accent}"

# Message styling
set -g message-style "bg=#{@theme_bg},fg=#{@theme_fg}"
set -g message-command-style "bg=#{@theme_bg},fg=#{@theme_fg}"

# Clock mode styling
setw -g clock-mode-colour "#{@theme_accent}"

# Mode styling
setw -g mode-style "bg=#{@theme_accent},fg=#{@theme_bg}"

# List plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

# Initialize TMUX plugin manager
run '~/.tmux/plugins/tpm/tpm'